"use strict";angular.module("app",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ngToast","ui.bootstrap","ui.ace"]);angular.module("app").config(["$routeProvider",function(a){a.when("/home",{templateUrl:"routes/main/view.html",controller:"MainCtrl"}).otherwise({redirectTo:"/home"})}]).run(function(){});"use strict";angular.module("app").controller("MainCtrl",function(){});angular.module("app").directive("map",["$rootScope","GmlModel",function(a,b){var c=null,d=null,e=null,f=null,g;window.constants={AppIdAndToken:{appId:"wflUzsDKST7ZOf6kyWWD",appCode:"jf2Wx2eQEebJsYwvYhppuw",language:"en-US",serviceMode:"cit"},InitialLocation:{longitude:52.53,latitude:13.39,zoomLevel:14},JSLibs:{HereMapsUrl:"https://js.cit.api.here.com/se/2.5.4/jsl.js?blank=true",gmlUrl:"polygon/libs/lib.min.js"},namespace:"nokia"};function h(a,b){return new e.Display(b,{center:[a.longitude,a.latitude],zoomLevel:a.zoomLevel,components:[]})}function i(a){c.Settings.set("app_id",a.appId);c.Settings.set("app_code",a.appCode)}function j(b,h,j){c=window[window.constants.namespace];g=function(b){d=c.maps.map;i(constants.AppIdAndToken);$.getScript(window.constants.JSLibs.gmlUrl,function(){a.$broadcast("ready-map")});if(e===null){e=new d.Display(document.getElementById("mapContainer"),{center:[constants.InitialLocation.longitude,constants.InitialLocation.latitude],zoomLevel:constants.InitialLocation.zoomLevel,components:[]});if(e)e.addListener("displayready",function(){a.$broadcast("render")},false)}};f=c.Features.getFeaturesFromMatrix(["maps"]);c.Features.load(f,g,null,null,false)}return{restrict:"AE",replace:true,templateUrl:"directives/map/view.html",scope:{},compile:function(c,d){return{pre:function(c,d,f){a.$on("render",function(){if(b.get()){var a=new nokia.maps.gml.Manager;var c=null;function d(a){var b=null;if(a.state==="finished"){b=new nokia.maps.gml.component.gmlResultSet(a.gmlDocument,e);b.addObserver("state",function(a){if(a.state==="finished"){c=a.container;e.objects.getLength()>0&&e.objects.removeAt(0);for(var b=0;b<e.objects.getLength();b++)e.objects.removeAt(0);e.objects.add(c);e.zoomTo(c.getBoundingBox())}});b.create()}}a.addObserver("state",d);a.parserString(b.get())}})},post:function(a,b,c){$.getScript(window.constants.JSLibs.HereMapsUrl,j)}}}}}]);angular.module("app").directive("editor",["$http","$rootScope","GmlModel","Editor",function(a,b,c,d){var e="data/sardinia.gml";return{restrict:"AE",replace:true,templateUrl:"directives/editor/view.html",scope:false,compile:function(a,b){return{pre:function(a,b,e){a.aceLoaded=function(b){a.editor=b;a.editor.$blockScrolling=Infinity;d.set(a.editor)};a.aceChanged=function(){c.set(a.editor.getValue())}},post:function(a,b,c){}}}}}]);angular.module("app").directive("gmlPolygonVisualizer",["$rootScope","GmlModel","$timeout","Editor",function(a,b,c,d){var e="data/sardinia.gml";return{restrict:"AE",replace:true,templateUrl:"directives/gml-polygon-visualizer/view.html",scope:{},compile:function(c,f){return{pre:function(b,c,d){b.render=function(){a.$broadcast("render")}},post:function(c,f,g){a.$on("ready-map",function(){b.loadFromUrl(e).then(function(a){d.get().setValue(a,-1)})})}}}}}]);"use strict";angular.module("app").factory("GmlModel",["$http","$rootScope",function(a,b){var c={};c.gml={};return{model:{},loadFromUrl:function(b){var d=this;return a({url:b}).then(function(a){c.gml=a.data;return c.gml})},get:function(){return c.gml},set:function(a){c.gml=a}}}]);"use strict";angular.module("app").factory("Editor",function(){var a={};a.editor=null;return{model:{},get:function(){return a.editor},set:function(b){a.editor=b}}});angular.module("app").run(["$templateCache",function(a){"use strict";a.put("routes/main/view.html","<div> <gml-polygon-visualizer></gml-polygon-visualizer> </div>");a.put("directives/editor/view.html","<div> <style>.editor{\n"+"    width: 100%;\n"+"    height: 400px;\n"+"    background-color: #272822;\n"+"    color:#eeeeee;\n"+'  }</style> <div> <div class="editor" ui-ace="{\n'+"      showGutter: true,\n"+"      onLoad: aceLoaded,\n"+"      onChange: aceChanged\n"+'    }"></div> </div> </div>');a.put("directives/gml-polygon-visualizer/view.html","<div> <style>#gml-polygon-visualizer{\n"+"      padding: 15px;\n"+"    }\n"+"    .gml-polygon-visualizer-title{\n"+"      text-align: center;\n"+"    }\n"+"    .render-button-container{\n"+"      margin-top: 15px;\n"+'    }</style> <div id="gml-polygon-visualizer"> <div class="row title"> <h1 class="gml-polygon-visualizer-title"> Polygon Visualizer (Lite)</h1> </div> <div class="row"> <div class="col-md-6"> <map></map> </div> <div class="col-md-6"> <editor></editor> </div> </div> <div class="row"> <div class="col-md-6 render-button-container"> <a class="btn btn-primary btn-lg" id="render-button" ng-click="render()">Render</a> </div> </div> </div> </div>');a.put("directives/map/view.html","<div> <style>#mapContainer{\n"+"      width:100%;\n"+"      height:400px;\n"+'    }</style> <div> <div id="mapContainer"></div> </div> </div>')}]);
