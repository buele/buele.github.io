"undefined"!=typeof ovi&&ovi.provide("nokia.maps.map.provider.IData"),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.map.provider.IObjectProvider"),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.ObservableNode"),function(e){if("undefined"!=typeof ovi)var t=e&&e.util&&e.util.Coroutine;if("undefined"!=typeof ovi&&"undefined"!=typeof ovi.Class)var i=e.gml.ObservableNode=new ovi.Class({Extends:e&&e.util&&e.util.OObject,initialize:function(e){this.node=e,this.set("state",i.State.INITIAL)},Statics:{State:{INITIAL:"initial",READY:"ready"}},init:function(){},createItem:function(e){return new i(e)},validate:function(e){return e&&1==e.nodeType},hasChildren:function(e){return 0===(e&&e.childNodes||[]).length},setReady:function(){var e=this.parent;e&&(e.readyCount++,e.validCount==e.readyCount&&e.set("state",i.State.READY))},release:function(){delete this.readyCount,delete this.validCount,delete this.node},load:function(e,n){var o=this,a=o.node;a&&o.state!=i.State.READY?(n&&(o.parent=n),o.addObserver("state",function(){"ready"==o.state&&(o.release(),(e||o.setReady).apply(o))}),o.init(),o.hasChildren(a)?o.set("state",i.State.READY):(o.readyCount=0,o.validCount=0,t.create("nokia.maps.gml.ObservableNode#load",function(e){var n,a=!1;for(e.has("index")||(e.index=0),e.has("childNodes")||(e.childNodes=o.node.childNodes||[]),e.has("length")||(e.length=e.childNodes.length);e.index<e.length;)if(n=e.childNodes[e.index],o.validate(n)&&(o.validCount++,n=o.createItem(n,o.validCount-1),n&&(a=n.load(null,o))),e.index++,t.shallYield(),a)return t.yield();o.validCount==o.readyCount&&o.set("state",i.State.READY)})())):o.set("state",i.State.READY)}})}("undefined"!=typeof nokia&&nokia.maps),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.DOM"),function(e){var t=e&&e.geo&&e.geo.Coordinate,i={test:"test string",Statics:{getString:function(e){var t="";if(!1 in e||"[object NodeList]"!=Object.prototype.toString.call(e.childNodes))return t;for(var i=0;i<e.childNodes.length;i++)t+=e.childNodes[i].nodeValue;return t},parseCoords:function(e){for(var i=e.split(/\s+/),n=[],o=0;o<i.length;o++){var a=i[o].split(",");a.length>=2&&n.push(new t(parseFloat(a[1]),parseFloat(a[0])))}return n},parseFromString:function(e){var t=null;return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.resolveExternals=!1,t.validateOnParse=!1,t.loadXML(e),t.parseError.errorCode):self.DOMParser&&(t=new DOMParser,t=t.parseFromString(e,"text/xml")),t||null},isValidNode:function(e,t){if(!e||!t)return!1;if(Array.prototype.indexOf)return e.indexOf(t)!=-1;for(var i=0;i<e.length;i++)if(e[i].toLowerCase()===t.toLowerCase())return!0;return!1}}};"undefined"!=typeof ovi&&(e.gml.DOM=new ovi.Class(i)),"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=i),exports.dom=i)}("undefined"!=typeof nokia&&nokia.maps),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.Object"),function(e){"undefined"!=typeof ovi&&(e.Object=new ovi.Class({initialize:function(e){this.node=e}}))}("undefined"!=typeof nokia&&"undefined"!=typeof nokia.maps&&nokia.maps.gml),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.LineStyle"),function(e){"undefined"!=typeof ovi&&(e.LineStyle=new ovi.Class({Statics:{DEFAULT_STROKE_COLOR:"#000000ff",DEFAULT_STROKE_WIDTH:1}}))}("undefined"!=typeof nokia&&"undefined"!=typeof nokia.maps&&nokia.maps.gml),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.Geometry"),function(e){"undefined"!=typeof ovi&&(e.gml.Geometry=new ovi.Class({Mixins:[e.gml.ObservableNode],Extends:e.gml.Object,initialize:function(e){this._super(e)}}))}("undefined"!=typeof nokia&&nokia.maps),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.LinearRing"),function(e){var t=e&&e.gml,i=t&&t.DOM,n=e&&e.geo&&e.geo.Coordinate;"undefined"!=typeof ovi&&(t.LinearRing=ovi&&new ovi.Class({Extends:t.Geometry,initialize:function(e,t){var n=e.childNodes;for(this._super(e),this.lineStyle={},e=n.length;e--;){var o=n[e];switch(o.nodeName){case"gml:coordinates":this.coordinates=this.extractCoordinates(i.getString(o))}}this.weight=this.coordinates.length},coordinates:[],extractCoordinates:function(e){var t=[],n=null;try{t=i.parseCoords(e)}catch(e){t=[]}return(n=t.length)<2?[]:(t[0].equals(t[n-1])||t.push(t[0]),t)},getCenterCoordinate:function(){var e=this.coordinates,t=0,i=0;if(e){for(var o=e.length-1;o>0;o--)t+=e[o].latitude,i+=e[o].longitude;return new n(t/(e.length-1),i/(e.length-1))}return null}}))}("undefined"!=typeof nokia&&nokia.maps),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.Polygon"),function(e){if("undefined"!=typeof ovi)var t=e&&e.gml,i=t.DOM,n=t.LinearRing,o=t.LineStyle,a=e.geo.Coordinate;t&&(t.Polygon="undefined"!=typeof ovi&&new ovi.Class({Extends:t.Geometry,initialize:function(e,t,o,a){var s,r=e.childNodes,d=0,l=r.length;for(s=0,this._super(e),t&&a&&(a.polyStyle=t),o&&a&&(a.balloonStyle=o),this.featureStyle={},this.innerBoundaryIs=[];d<l;){switch(s=r[d],s.nodeName){case"extrude":this.extrude=i.getBoolean(s);break;case"altitudeMode":this.altitudeMode=i.getAltitudeMode(s);break;case"tessellate":this.tessellate=i.getBoolean(s);break;case"gml:outerBoundaryIs":for(t=s.childNodes,e=0,s=t.length;e<s;)"gml:LinearRing"==t[e].nodeName&&(this.outerBoundaryIs=new n(t[e]),this.weight+=this.outerBoundaryIs.weight),e++;break;case"gml:innerBoundaryIs":for(t=s.childNodes,e=0,s=t.length;e<s;)o=t[e],"gml:LinearRing"==o.nodeName&&(this.innerBoundaryIs.push(o=new n(o)),this.weight+=o.weight),e++}d++}},getPathOuter:function(){return void 0===this.pathOuter&&(this.pathOuter=null,this.outerBoundaryIs&&this.outerBoundaryIs.constructor===n)&&(this.pathOuter=this.outerBoundaryIs.coordinates),this.pathOuter},getCenterCoordinate:function(){var e=this.getPathOuter(),t=e.length-1,i=t,n=0,o=0;if(e){for(;t--;)n+=e[t].latitude,o+=e[t].longitude;return new a(n/i,o/i)}return null},getStyle:function(){var e=this.featureStyle.balloonStyle,t=this.featureStyle.polyStyle,i={};return i.color=this.color="#ff00007d",i.fillColor=this.fillColor="#0000ff7d",i.width=this.width=o.DEFAULT_STROKE_WIDTH,i.strokeColor=o.DEFAULT_STROKE_COLOR,t&&(t.color&&(i.fillColor=this.fillColor=t.color),t.fill||(i.fillColor=this.fillColor="#00000000"),t.outline||(i.width=this.width=0)),e&&(e.bgColor&&(i.bgColor=this.bgColor=e.bgColor),e.textColor&&(i.textColor=this.textColor=e.textColor),e.text&&(i.text=this.text=e.text),e.displayMode&&(i.displayMode=this.displayMode=e.displayMode)),i}}))}("undefined"!=typeof nokia&&nokia.maps),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.Feature"),function(e){"undefined"!=typeof ovi&&(e.Feature=new ovi.Class({Mixins:[e.ObservableNode],Extends:e.Object,initialize:function(e){this._super(e)},init:function(){this.visibility=!0}}))}("undefined"!=typeof nokia&&"undefined"!=typeof nokia.maps&&nokia.maps.gml),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.FeatureMember"),function(e){"undefined"!=typeof ovi&&(e.FeatureMember=new ovi.Class({Extends:e.Feature,initialize:function(e,t){this._super(e,t)},createItem:function(t){switch(t.nodeName){case"gml:LinearRing":this.geometry=new e.LinearRing(t);break;case"gml:Polygon":this.geometry=new e.Polygon(t)}return this.geometry&&(this.geometry.visibility=this.visibility),this.geometry},validate:function(t){return e.DOM.isValidNode(["gml:LinearRing","gml:Polygon"],t.nodeName)}}))}("undefined"!=typeof nokia&&"undefined"!=typeof nokia.maps&&nokia.maps.gml),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.component.gmlResultSet"),function(e){if("undefined"!=typeof ovi)var t=e.gml,i=e.util.Coroutine,n=e.map,o=t.component.gmlResultSet=new ovi.Class({Extends:e.util.OObject,initialize:function(e){var t=this;t.set("state",o.State.INITIAL),t.document=e.gmlDocument||e,t.container=new n.Container},Statics:{State:{INITIAL:"initial",STARTED:"started",FINISHED:"finished"}},container:null,create:function(){var e=this,a=o.State;return e.state==a.STARTED||e.state==a.FINISHED?e.container:(e.set("state",o.State.STARTED),i.create("nokia.maps.gml.gmlResultSet#create_BFS",function(o){var a,s,r,d,l;for(o.has("index")||(o.index=0),o.has("weight")||(o.weight=0);o.queue.length>0;){o.has("queueNode")?queueNode=o.queueNode:queueNode=o.queueNode=o.queue.shift(),s=queueNode.node,parent=queueNode.parent,a=parent.objects;var u=s instanceof t.Document;if(u){for(s=u?s:s.geometry,l=u?s.features:s.geometries,d=l.length,r=o.has("mapObject")?o.mapObject:new n.Container([],{visibility:s.visibility}),0===o.index&&a.add(r);o.index<d;){if(o.queue.push({node:l[o.index],parent:r}),o.index++,i.shallYield())return o.mapObject=r,i.yield();if(o.index%100===0)return o.mapObject=r,i.sleep(1)}o.index=0,delete o.mapObject}else(s=s.geometry||s)&&(r=null,s instanceof t.LinearRing?r=e.getLineObject(s):(r=e.getPolygonObject(s),s instanceof t.Polygon&&r&&r&&(a.add(r),o.weight+=s.weight)));if(delete o.queueNode,i.shallYield())return i.yield();if(o.weight>=600)return o.weight=0,i.sleep(1)}},"queue")([{node:e.document,parent:e.container}]).onTerminated=function(){delete e.document,e.set("state",o.State.FINISHED)},e.container)},getPolygonObject:function(t){var i=t.getStyle(),n=t.getPathOuter();if(!(n.length<2))return new e.map.Polygon(n,{pen:{strokeColor:i.strokeColor,lineWidth:i.width},brush:{color:i.fillColor},visibility:t.visibility})}})}("undefined"!=typeof nokia&&nokia.maps),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.Container"),function(e){"undefined"!=typeof ovi&&(e.Container=new ovi.Class({Extends:e.Feature,initialize:function(e,t){this._super(e,t)},init:function(){this.featureMembers=[],this.features=[],this._super()},validate:function(t){return e.DOM.isValidNode(["gml:featureMember"],t.nodeName)},createItem:function(t,i){var n=null;switch(t.nodeName){case"gml:featureMember":n=new e.FeatureMember(t),n&&this.featureMembers.push(n)}return n&&this.features.push(n),n.index=i,n}}))}("undefined"!=typeof nokia&&"undefined"!=typeof nokia.maps&&nokia.maps.gml),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.Document"),function(e){"undefined"!=typeof ovi&&(e.Document=new ovi.Class({Extends:e.Container,initialize:function(e,t){this._super(e,t)}}))}("undefined"!=typeof nokia&&"undefined"!=typeof nokia.maps&&nokia.maps.gml),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml.Manager"),function(e){if("undefined"!=typeof ovi)var t=e.gml,i=t.Style,n=t.StyleMap,o=t.Document,a=t.DOM,s=e.net.Request,r=t.Manager=new ovi.Class({Extends:e.util.OObject,initialize:function(e){this.set("state",r.State.INITIAL),this.xhrRequest=new s(s.XHR),this.gmlDocument=null},Statics:{State:{INITIAL:"initial",STARTED:"started",LOADED:"loaded",FINISHED:"finished",FAILED:"failed"}},parse:function(e){var t,a,s,d=this;for(d.styles={},s=e.getElementsByTagName("Style"),a=s.length;a--;)(t=new i(s[a]))&&t.id&&d.styles.push(t);for(s=e.getElementsByTagName("StyleMap"),a=s.length;a--;)(t=new n(s[a],d.styles))&&t.id&&d.styles.push(t);d.gmlDocument=new o(e,d.styles),d.gmlDocument.load(function(){d.set("state",r.State.FINISHED)}),d.gmlDocument.Bf=d.Bf},parsegml:function(e){this.set("state",r.State.STARTED),"undefined"==typeof e?this.set("state",r.State.FAILED):(this.path=e,this.xhrRequest.send(e,ovi.bind(this,this.Cu)))},parserString:function(e){var t=a.parseFromString(e).documentElement;this.parse(t)},Cu:function(e){this.Bf=e.url,e.error||e.timeout?this.set("state",r.State.FAILED):(this.set("state",r.State.LOADED),e=a.parseFromString(e.response).documentElement,this.parse(e))}})}("undefined"!=typeof nokia&&nokia.maps),"undefined"!=typeof ovi&&ovi.provide("nokia.maps.gml._packaging.package-gml");